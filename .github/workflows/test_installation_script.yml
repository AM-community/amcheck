name: Test installation scripts
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: build
      if: always()
      run: |
        wget https://raw.githubusercontent.com/ivan-hc/AM/main/INSTALL && chmod a+x ./INSTALL && sudo ./INSTALL
        APP=voicevox
        am --devmode-enable
        am -i $APP
        echo "################################################"
        echo "##### Content of /opt/$APP"
        echo "################################################"
        ls /opt
        echo "################################################"
        echo "##### Content of /opt"
        echo "################################################"
        ls /opt/$APP
        echo "################################################"
        echo "##### Content of /usr/local/share/applications"
        echo "################################################"
        ls /usr/local/share/applications
        echo "################################################"
        echo "##### Content of /usr/local/bin"
        echo "################################################"
        ls /usr/local/bin
